<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spin & Support ‚Äî Help Me Study</title>
  <style>
    :root{--bg:#0f1724;--card:#111827;--accent:#f59e0b;--muted:#9ca3af}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{background:linear-gradient(180deg,#071025 0%, #071a2b 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    .header{display:flex;gap:16px;align-items:center}
    h1{margin:0;font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}
    .layout{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:18px}
    .card{background:rgba(255,255,255,0.02);padding:14px;border-radius:12px}
    canvas{display:block;margin:0 auto;background:transparent}
    .controls{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:12px}
    button{background:var(--accent);border:0;padding:10px 16px;border-radius:8px;font-weight:600;cursor:pointer}
    button:disabled{opacity:0.5;cursor:default}
    .qrcard{display:flex;flex-direction:column;align-items:center;gap:12px;padding:14px}
    .qr{width:220px;height:220px;background:#fff;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .qr img{width:100%;height:100%;object-fit:cover}
    .small{font-size:13px;color:var(--muted);text-align:center}
    .donate-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer}
    .footer{margin-top:14px;color:var(--muted);font-size:12px;text-align:center}
    .result{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:var(--card);padding:18px;border-radius:12px;display:none;min-width:260px;text-align:center;z-index:50}
    .close-x{position:absolute;right:8px;top:8px;cursor:pointer;color:var(--muted)}
    .emotional{margin-top:20px;padding:14px;background:rgba(255,255,255,0.03);border-radius:12px;color:#f9fafb;font-size:14px;line-height:1.6}
    @media(max-width:840px){.layout{grid-template-columns:1fr;}
      .qr{width:160px;height:160px}
      .card{padding:10px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div style="width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,#fde68a,#fb923c);display:flex;align-items:center;justify-content:center;color:#111;font-weight:700;font-size:18px">SP</div>
      <div>
        <h1>Spin & Support ‚Äî Help Me Continue My Studies</h1>
        <p class="lead">Play this fun spin wheel. If you enjoyed, please scan the QR to donate ‚Äî your support keeps my education alive.</p>
      </div>
    </div>

    <div class="layout">
      <div class="card">
        <canvas id="wheel" width="520" height="520"></canvas>
        <div class="controls">
          <button id="spinBtn">SPIN</button>
          <button id="autoBtn" class="donate-btn">Auto-demo spin</button>
        </div>
        <div style="text-align:center;margin-top:10px;color:var(--muted);font-size:13px">After playing, please consider supporting me.</div>
      </div>

      <div class="card qrcard">
        <div style="font-weight:700">Scan to Donate</div>
        <div class="qr" id="qrBox">
          <img id="qrImg" src="MY QR.jpg" alt="Donation QR">
        </div>
        <div class="small">Or copy UPI / payment link below and share it with friends.</div>
        <input id="upiInput" type="text" value="upi://pay?pa=YOUR@UPI&pn=YourName&am=10" style="width:100%;padding:8px;border-radius:8px;border:0;margin-top:8px;background:rgba(255,255,255,0.02);color:inherit">
        <button id="copyBtn" class="donate-btn">Copy UPI Link</button>
      </div>
    </div>

    <div class="emotional">
      I am a student with big dreams but limited means. Life in the hostel is tough, and sometimes even managing my basic needs feels heavy. Still, I don‚Äôt want to give up on my studies because education is the only path to change my life and support my family. If you are reading this, I believe you are a kind soul who understands the value of helping someone in need. Your small support can make a huge difference in my journey ‚Äî it‚Äôs not just money, it‚Äôs hope, strength, and a reminder that humanity still exists. Every single contribution brings me closer to continuing my education and building a better future. Thank you for being part of my story.
    </div>

    <div class="footer">This is a donation / fun game page ‚Äî not gambling. Every spin is free.</div>
  </div>

  <div id="resultModal" class="result">
    <div class="close-x" id="closeRes">‚úï</div>
    <div style="font-size:18px;font-weight:700;margin-bottom:6px" id="resultTitle">You won!</div>
    <div id="resultText" style="color:var(--muted);margin-bottom:10px">Congrats ‚Äî thanks for playing.</div>
    <button id="resDonate" style="padding:8px 12px;border-radius:8px;border:0;background:var(--accent);font-weight:700">Donate Now (Scan QR)</button>
  </div>

  <script>
    // --- Wheel configuration ---
    const segments = [
      'Blessings ‚ù§Ô∏è','Study Hard üìö','Try Again ‚ú®','Donate ‚Çπ10 üôè','Motivation üöÄ','Donate ‚Çπ20 üåü','Keep Smiling üòä','Thank You üíñ'
    ];
    const colors = ['#fef3c7','#fde68a','#fee2e2','#dbeafe','#e9d5ff','#d1fae5','#fff7ed','#eef2ff'];

    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    const size = canvas.width; const cx = size/2; const cy = size/2; const radius = size*0.45;

    let startAngle = 0;

    function drawWheel(angle=0){
      ctx.clearRect(0,0,size,size);
      ctx.save(); ctx.translate(cx,cy); ctx.rotate(angle);
      const segAngle = (2*Math.PI)/segments.length;
      for(let i=0;i<segments.length;i++){
        const s = i*segAngle;
        ctx.beginPath();
        ctx.moveTo(0,0);
        ctx.arc(0,0,radius,s,s+segAngle);
        ctx.closePath();
        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();
        // texts
        ctx.save();
        ctx.fillStyle = '#0f1724';
        ctx.translate(Math.cos(s+segAngle/2)*(radius*0.65), Math.sin(s+segAngle/2)*(radius*0.65));
        ctx.rotate(s+segAngle/2+Math.PI/2);
        ctx.font = 'bold 16px Arial';
        ctx.textAlign='center';
        wrapText(ctx, segments[i], 0, 0, 110, 18);
        ctx.restore();
      }
      ctx.beginPath(); ctx.arc(0,0,60,0,2*Math.PI); ctx.fillStyle='#071025'; ctx.fill();
      ctx.restore();
      ctx.beginPath(); ctx.moveTo(cx, cy - radius - 12); ctx.lineTo(cx-16, cy - radius + 16); ctx.lineTo(cx+16, cy - radius + 16); ctx.closePath(); ctx.fillStyle='#f59e0b'; ctx.fill();
    }

    function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      let lines = [];
      for(let n=0;n<words.length;n++){
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        if(metrics.width > maxWidth && n>0){ lines.push(line.trim()); line = words[n] + ' '; }
        else { line = testLine; }
      }
      lines.push(line.trim());
      for(let i=0;i<lines.length;i++) ctx.fillText(lines[i], x, y + (i*lineHeight) - ((lines.length-1)/2*lineHeight));
    }

    drawWheel(0);

    const spinBtn = document.getElementById('spinBtn');
    const autoBtn = document.getElementById('autoBtn');
    const resultModal = document.getElementById('resultModal');
    const resultTitle = document.getElementById('resultTitle');
    const resultText = document.getElementById('resultText');
    const resDonate = document.getElementById('resDonate');
    let isSpinning = false;

    function easeOutCubic(t){ return 1 - Math.pow(1-t,3); }

    async function spinOnce(){
      if(isSpinning) return; isSpinning = true; spinBtn.disabled = true;
      const rounds = Math.floor(Math.random()*3) + 4;
      const chosen = Math.floor(Math.random()*segments.length);
      const segAngle = (2*Math.PI)/segments.length;
      const targetAngle = (Math.PI*1.5) - (chosen*segAngle) - (segAngle/2);
      const start = performance.now();
      const duration = 3600 + Math.random()*1600;
      return new Promise(resolve=>{
        function animate(time){
          const t = Math.min(1,(time-start)/duration);
          const eased = easeOutCubic(t);
          const current = (rounds*2*Math.PI*eased) + (targetAngle*eased);
          drawWheel(current);
          if(t<1) requestAnimationFrame(animate);
          else { isSpinning=false; spinBtn.disabled=false; showResult(chosen); resolve(); }
        }
        requestAnimationFrame(animate);
      });
    }

    spinBtn.addEventListener('click', ()=>{ spinOnce(); });
    autoBtn.addEventListener('click', ()=>{ spinOnce(); });

    function showResult(index){
      const text = segments[index];
      resultTitle.textContent = text;
      resultText.textContent = getResultMessage(text);
      resultModal.style.display = 'block';
    }
    document.getElementById('closeRes').addEventListener('click', ()=>{ resultModal.style.display='none'; });

    function getResultMessage(text){
      if(text.includes('Donate')) return 'If you wish, please scan the QR or copy the UPI link to help me study.';
      if(text.includes('Try Again')) return 'Oops ‚Äî try again or share the link with friends!';
      if(text.includes('Blessings')) return 'Your blessings mean the world ‚Äî thank you!';
      if(text.includes('Study')) return 'This spin reminds me to study harder ‚Äî thank you for playing!';
      if(text.includes('Motivation')) return 'Your spin gives me motivation to keep going!';
      return 'Thanks for playing ‚Äî every bit helps!';
    }

    document.getElementById('copyBtn').addEventListener('click', ()=>{
      const txt = document.getElementById('upiInput').value;
      navigator.clipboard.writeText(txt).then(()=>{ alert('UPI link copied to clipboard'); }).catch(()=>{ alert('Copy failed ‚Äî please copy manually'); });
    });
    resDonate.addEventListener('click', ()=>{ document.getElementById('qrImg').scrollIntoView({behavior:'smooth',block:'center'}); resultModal.style.display='none'; });
  </script>
</body>
</html>

